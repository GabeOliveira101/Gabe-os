<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0a0a0a">
<title>Gabe OS</title>
<link rel="manifest" href="manifest.json">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:-apple-system,BlinkMacSystemFont,'Helvetica Neue','Arial',sans-serif;
  background:#0a0a0a;color:#fff;min-height:100vh;
  -webkit-font-smoothing:antialiased;overflow-x:hidden;
  padding-bottom:90px;
}
.header{
  background:linear-gradient(180deg,#1a1a1a 0%,#0a0a0a 100%);
  padding:20px;border-bottom:2px solid #00ff77;
}
.brand{
  font-size:11px;font-weight:700;letter-spacing:3px;color:#00ff77;margin-bottom:6px;
}
.date-greeting{font-size:14px;font-weight:600;letter-spacing:1px;}
.container{padding:20px;max-width:600px;margin:0 auto;}
.card{
  background:#1a1a1a;border:1px solid #2a2a2a;margin-bottom:20px;overflow:hidden;
}
.card-header{
  padding:16px 20px;background:#0f0f0f;border-bottom:1px solid #2a2a2a;
  display:flex;justify-content:space-between;align-items:center;
}
.card-title{font-size:11px;font-weight:700;letter-spacing:2.5px;color:#999;}
.card-body{padding:20px;}
.btn{
  background:#00ff77;color:#0a0a0a;border:none;padding:12px 24px;font-size:11px;
  font-weight:700;letter-spacing:2px;text-transform:uppercase;cursor:pointer;
  transition:all .2s;margin-top:20px;
}
.btn:active{transform:scale(.97);background:#00e86a;}
.focus-input,.win-input{
  background:#0a0a0a;border:1px solid #2a2a2a;color:#fff;font-size:16px;
  font-weight:600;padding:14px;width:100%;outline:none;transition:border .2s;
}
.focus-input:focus,.win-input:focus{border-color:#00ff77;}
.win-input::placeholder,.focus-input::placeholder{color:#555;}
.wins-list{list-style:none;}
.win-item{background:#0f0f0f;border-left:3px solid #00ff77;padding:14px;margin-bottom:12px;}
.win-text{font-size:14px;font-weight:600;margin-bottom:6px;}
.win-timestamp{font-size:11px;color:#666;letter-spacing:1px;}
.empty-state{text-align:center;padding:40px;color:#555;font-size:13px;letter-spacing:1px;}
#bottomNav{
  position:fixed;bottom:10;left:0;right:0;display:flex;justify-content:space-around;
  background:#0a0a0a;border-top:2px solid #00ff77;z-index:100;
}
#bottomNav button{
  flex:1;padding:12px 0;border:none;background:none;color:#00ff77;
  font-size:20px;cursor:pointer;
}
.video-wrapper iframe{border:none;border-radius:8px;margin-bottom:16px;}
.video-wrapper iframe{border:none;border-radius:8px;margin-bottom:16px;}

/* --- SMOOTH TRANSITIONS --- */
section {
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.3s ease, transform 0.3s ease;
}
section.active {
  opacity: 1;
  transform: translateY(0);
}

/* --- ELEVATED NAV --- */
#bottomNav {
  position: fixed;
  bottom: 12px;
  left: 10px;
  right: 10px;
  display: flex;
  justify-content: space-around;
  background: rgba(10,10,10,0.95);
  border: 2px solid #00ff77;
  border-radius: 14px;
  z-index: 100;
  backdrop-filter: blur(6px);
  box-shadow: 0 0 12px rgba(0,255,119,0.3);
}

/* --- NAV BUTTON STYLES --- */
#bottomNav button {
  flex: 1;
  padding: 12px 0;
  border: none;
  background: none;
  color: #00ff77;
  font-size: 20px;
  cursor: pointer;
  transition: color 0.2s, transform 0.2s;
}
#bottomNav button:active {
  transform: scale(0.9);
}
#bottomNav button.active {
  color: #0a0a0a;
  background: #00ff77;
  border-radius: 10px;
}
/* --- FOCUS TIP FADE-IN --- */
#focusTips {
  opacity: 0;
  transform: translateY(4px);
  transition: opacity 0.4s ease, transform 0.4s ease;
}
#focusTips.visible {
  opacity: 1;
  transform: translateY(0);
}

</style>
</head>
<body>

<div class="header">
  <div class="brand">BECOMING // CONTROL CENTER</div>
  <div class="date-greeting" id="dateGreeting"></div>
</div>

<div class="container">

  <!-- üß† DAILY MINDSET VIDEO -->
  <section id="motivationSection">
    <div class="card">
      <div class="card-header"><div class="card-title">DAILY MINDSET</div></div>
      <div class="card-body video-wrapper">
        <iframe width="100%" height="220"
          src="https://www.youtube.com/embed/UNQhuFL6CWg"
          title="Goggins ‚Äì Stay Hard"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
      </div>
    </div>
  </section>

  <!-- üéØ TODAY'S FOCUS -->
  <section id="focusSection">
    <div class="card">
      <div class="card-header"><div class="card-title">TODAY'S FOCUS</div></div>
      <div class="card-body">
        <input type="text" class="focus-input" id="focusInput" placeholder="LOCK IN YOUR MISSION...">
      <div id="focusTips" style="margin-top:15px;font-size:14px;color:#00ff77;line-height:1.4;"></div>
    </div>
  </section>

  <!-- üèÜ WINS -->
  <section id="winsSection" style="display:none;">
    <div class="card">
      <div class="card-header"><div class="card-title">WORK RATE // WINS</div></div>
      <div class="card-body">
        <button class="btn" id="addWinBtn">+ ADD WIN</button>
        <div id="winInputContainer" style="display:none;margin-top:15px;">
          <input type="text" class="win-input" id="winInput" placeholder="WHAT DID YOU EXECUTE?">
          <button class="btn" id="winSubmitBtn" style="margin-top:10px;">LOG IT</button>
        </div>
        <ul class="wins-list" id="winsList"></ul>
      </div>
    </div>
  </section>

  <!-- üé• VIDEOS TAB -->
  <section id="videosSection" style="display:none;">
    <div class="card">
      <div class="card-header"><div class="card-title">MOTIVATION VIDEOS</div></div>
      <div class="card-body video-wrapper">
        <iframe width="100%" height="200"
          src="https://www.youtube.com/embed/hbkZrOU1Zag"
          title="Kobe Mamba Mindset" allowfullscreen></iframe>
        <iframe width="100%" height="200"
          src="https://www.youtube.com/embed/2fC8R6E0Xyw"
          title="Greg Plitt Motivation" allowfullscreen></iframe>
      </div>
    </div>
  </section>
<!-- üì∏  GYM / PHOTO TRACKER SECTION -->
<section id="photosSection" style="display:none;">
  <div class="card">
    <div class="card-header">
      <div class="card-title">GYM PROGRESS LOG</div>
    </div>
    <div class="card-body">
      <input type="file" accept="image/*" id="photoInput" style="margin-bottom:10px;">
      <div id="photoSummary" style="margin-bottom:15px;font-size:14px;color:#00ff77;"></div>
      <div id="calendarGrid" style="display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:15px;"></div>
      <div id="photoFeed"></div>
    </div>
  </div>
</section>

  <!-- ‚öôÔ∏è OPS TAB -->
  <section id="opsSection" style="display:none;">
    <div class="card">
      <div class="card-header"><div class="card-title">OPS // TRAVEL // SCHEDULE</div></div>
      <div class="card-body" style="text-align:center;">
        <div style="font-size:32px;opacity:0.3;">‚úàÔ∏è</div>
        <div style="font-size:13px;color:#666;letter-spacing:1px;">LOGISTICS MODULE COMING SOON</div>
      </div>
    </div>
  </section>

</div>

<!-- Bottom Navigation -->
<nav id="bottomNav">
  <button data-target="focusSection">üéØ</button>
  <button data-target="winsSection">üèÜ</button>
  <button data-target="videosSection">üé•</button>
  <button data-target="photosSection">üì∏</button>
  <button data-target="opsSection">‚öôÔ∏è</button>
</nav>

<script>
function initDateGreeting(){
  const now=new Date();
  const options={month:'short',day:'numeric',year:'numeric'};
  const dateStr=now.toLocaleDateString('en-US',options).toUpperCase().replace(',','');
  document.getElementById('dateGreeting').textContent=`${dateStr} ‚Äî STAY LOCKED IN`;
}

// --- Wins logic ---
function loadWins(){return JSON.parse(localStorage.getItem('wins')||'[]');}
function saveWins(w){localStorage.setItem('wins',JSON.stringify(w));}
function renderWins(){
  const wins=loadWins();const list=document.getElementById('winsList');
  if(!wins.length){list.innerHTML='<div class="empty-state">NO WINS LOGGED YET.</div>';return;}
  list.innerHTML=wins.map(win=>`
    <li class="win-item">
      <div class="win-text">${win.text}</div>
      <div class="win-timestamp">${win.time}</div>
    </li>`).join('');
}
document.getElementById('addWinBtn').onclick=()=>{
  document.getElementById('winInputContainer').style.display='block';
  document.getElementById('winInput').focus();
};
document.getElementById('winSubmitBtn').onclick=()=>{
  const val=document.getElementById('winInput').value.trim();
  if(!val)return;
  const wins=loadWins();
  wins.unshift({text:val,time:new Date().toLocaleTimeString()});
  saveWins(wins);
  document.getElementById('winInput').value='';
  document.getElementById('winInputContainer').style.display='none';
  renderWins();
};

// --- Focus logic ---
const focusInput=document.getElementById('focusInput');
focusInput.value=localStorage.getItem('todayFocus')||'';
focusInput.addEventListener('input',e=>{
  localStorage.setItem('todayFocus',e.target.value);
});
// --- Focus Assistant ---
const focusTips = document.getElementById('focusTips');

function getFocusTips(focus) {
  focus = focus.toLowerCase();
  if (focus.includes('gym') || focus.includes('workout') || focus.includes('train')) {
    return [
      "Lay your gear out the night before.",
      "Hydrate and stretch early.",
      "Win the morning ‚Äî own the day."
    ];
  }
  if (focus.includes('read') || focus.includes('study')) {
    return [
      "Silence notifications.",
      "Set a 20-minute timer ‚Äî no distractions.",
      "Highlight one powerful line."
    ];
  }
  if (focus.includes('work') || focus.includes('project')) {
    return [
      "Start with the hardest task.",
      "Block one deep-work session.",
      "Momentum > perfection."
    ];
  }
  if (focus.includes('rest') || focus.includes('recovery')) {
    return [
      "Unplug fully.",
      "Reflect ‚Äî progress needs rest.",
      "Tomorrow starts with how you recharge today."
    ];
  }
  return [
    "Focus is power ‚Äî stay locked in.",
    "Discipline beats motivation.",
    "Small steps today build your tomorrow."
  ];
}

function showTips(focus) {
  const tips = getFocusTips(focus);
  const randomTip = tips[Math.floor(Math.random() * tips.length)];

  focusTips.classList.remove('visible'); // reset fade
  setTimeout(() => {
    focusTips.textContent = randomTip;
    focusTips.classList.add('visible'); // fade in
  }, 50);
}

// When typing, update tips
let focusTimer;
focusInput.addEventListener('input', e => {
  clearTimeout(focusTimer);
  const val = e.target.value.trim();

  if (val.length === 0) {
    focusTips.textContent = '';
    return;
  }

  // Wait until the user stops typing for 1 second
  focusTimer = setTimeout(() => {
    showTips(val);
  }, 1000);
});

// Also show a tip when user presses Enter
focusInput.addEventListener('keydown', e => {
  if (e.key === 'Enter') {
    e.preventDefault();
    const val = e.target.value.trim();
    if (val.length > 0) showTips(val);
  }
});
focusInput.addEventListener('keydown', e => {
  if (e.key === 'Enter') {
    e.preventDefault();
    const val = e.target.value.trim();
    if (val.length > 0) showTips(val);
  }
});

// --- Shuffle button logic (safe) ---
const shuffleTipBtn = document.getElementById('shuffleTip');
if (shuffleTipBtn) {
  shuffleTipBtn.addEventListener('click', () => {
    const val = focusInput.value.trim();
    if (val.length > 0) showTips(val);
  });
}


// --- Navigation ---
// --- Navigation with transitions and highlights ---
const navButtons = document.querySelectorAll('#bottomNav button');
const sections = document.querySelectorAll('section');

function showSection(target) {
  sections.forEach(sec => {
    if (sec.id === target) {
      sec.style.display = 'block';
      sec.classList.add('active');
    } else {
      sec.style.display = 'none';
      sec.classList.remove('active');
    }
  });

  // Show the video section only on Focus tab
  const motivation = document.getElementById('motivationSection');
  motivation.style.display = (target === 'focusSection') ? 'block' : 'none';
if (target === 'focusSection') {
  motivation.classList.add('active');
} else {
  motivation.classList.remove('active');
}

  // Highlight active button
  navButtons.forEach(b => b.classList.toggle('active', b.dataset.target === target));
}

navButtons.forEach(btn => {
  btn.addEventListener('click', () => showSection(btn.dataset.target));
});

// Show default section on load
showSection('focusSection');
// --- GYM / PHOTO TRACKER LOGIC ---
const photoInput = document.getElementById('photoInput');
const photoFeed = document.getElementById('photoFeed');
const photoSummary = document.getElementById('photoSummary');
const calendarGrid = document.getElementById('calendarGrid');

// Load saved photos
let gymPhotos = JSON.parse(localStorage.getItem('gymPhotos') || '[]');
renderPhotos();

// Handle new upload
photoInput.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    const newPhoto = {
      src: ev.target.result,
      date: new Date().toISOString().split('T')[0],
      note: ''
    };
    gymPhotos.push(newPhoto);
    localStorage.setItem('gymPhotos', JSON.stringify(gymPhotos));
    renderPhotos();
  };
  reader.readAsDataURL(file);
});

// Render photos
function renderPhotos() {
  photoFeed.innerHTML = '';
  gymPhotos.slice().reverse().forEach((p, idx) => {
    const div = document.createElement('div');
    div.style.marginBottom = '15px';
    div.innerHTML = `
      <img src="${p.src}" style="width:100%;border-radius:10px;margin-bottom:5px;">
      <small style="color:#888;">${p.date}</small><br>
      <button data-idx="${idx}" class="deletePhoto" style="background:none;border:1px solid #333;color:#ff4444;border-radius:6px;padding:4px 6px;margin-bottom:6px;cursor:pointer;">üóëÔ∏è Delete</button>
      <textarea placeholder="Add note..." data-idx="${idx}"
        style="width:100%;margin-top:5px;background:#111;color:#fff;border:1px solid #333;border-radius:6px;padding:6px;">${p.note||''}</textarea>
    `;
    photoFeed.appendChild(div);
  });

  // Save notes
  document.querySelectorAll('#photoFeed textarea').forEach(t => {
    t.addEventListener('input', e => {
      const i = e.target.dataset.idx;
      gymPhotos[gymPhotos.length - 1 - i].note = e.target.value;
      localStorage.setItem('gymPhotos', JSON.stringify(gymPhotos));
    });
  });

  // Delete photo
  document.querySelectorAll('.deletePhoto').forEach(btn => {
    btn.addEventListener('click', e => {
      const i = e.target.dataset.idx;
      gymPhotos.splice(gymPhotos.length - 1 - i, 1);
      localStorage.setItem('gymPhotos', JSON.stringify(gymPhotos));
      renderPhotos();
    });
  });

  updateCalendar();
}

// --- CALENDAR + STREAK TRACKER ---
function updateCalendar() {
  const now = new Date();
  const month = now.toISOString().slice(0,7);
  const daysInMonth = new Date(now.getFullYear(), now.getMonth()+1, 0).getDate();
  const gymDays = {};
  gymPhotos.forEach(p => {
    const d = p.date;
    if (d.startsWith(month)) gymDays[d] = true;
  });

  // Streak logic
  let streak = 0, currentStreak = 0;
  const today = new Date().toISOString().split('T')[0];
  const dates = Object.keys(gymDays).sort();
  for (let i=0; i<dates.length; i++) {
    if (i>0) {
      const diff = (new Date(dates[i]) - new Date(dates[i-1])) / (1000*60*60*24);
      if (diff === 1) currentStreak++;
      else currentStreak = 1;
    } else currentStreak = 1;
  }
  if (gymDays[today]) streak = currentStreak;

  // Calendar grid
  let calHTML = '';
  for (let d=1; d<=daysInMonth; d++) {
    const dateStr = `${month}-${String(d).padStart(2,'0')}`;
    const workedOut = gymDays[dateStr];
    calHTML += `<div style="
      background:${workedOut?'#00ff77':'#111'};
      color:${workedOut?'#000':'#555'};
      text-align:center;
      padding:4px 0;
      border-radius:6px;
      font-size:12px;
    ">${d}</div>`;
  }
  calendarGrid.innerHTML = calHTML;

  // Summary text
  const count = Object.keys(gymDays).length;
  photoSummary.innerHTML = `
    ${month} Gym Days: ${count} &nbsp;|&nbsp; üî• Streak: ${streak} day${streak!==1?'s':''}
  `;
}
// --- GYM / PHOTO TRACKER (Full Upgrade) ---
let selectedDate = new Date().toISOString().split('T')[0];

// Initialize storage structure
if (!localStorage.getItem('gymPhotos')) {
  localStorage.setItem('gymPhotos', JSON.stringify({}));
}

const photoInput = document.getElementById('photoInput');
const photoFeed = document.getElementById('photoFeed');
const photoSummary = document.getElementById('photoSummary');
const calendarGrid = document.getElementById('calendarGrid');

function loadPhotos() {
  return JSON.parse(localStorage.getItem('gymPhotos') || '{}');
}

function savePhotos(data) {
  localStorage.setItem('gymPhotos', JSON.stringify(data));
}

// Handle upload
if (photoInput) {
  photoInput.addEventListener('change', e => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = ev => {
      const photos = loadPhotos();
      if (!photos[selectedDate]) photos[selectedDate] = [];
      photos[selectedDate].push({
        src: ev.target.result,
        note: '',
        date: selectedDate
      });
      savePhotos(photos);
      renderPhotos(selectedDate);
      updateCalendar();
    };
    reader.readAsDataURL(file);
  });
}

// Calendar + selectable dates
function updateCalendar() {
  const now = new Date();
  const month = now.toISOString().slice(0,7);
  const daysInMonth = new Date(now.getFullYear(), now.getMonth()+1, 0).getDate();
  const photos = loadPhotos();

  calendarGrid.innerHTML = '';
  for (let d=1; d<=daysInMonth; d++) {
    const dateStr = `${month}-${String(d).padStart(2,'0')}`;
    const workedOut = photos[dateStr] && photos[dateStr].length > 0;
    const cell = document.createElement('div');
    cell.dataset.date = dateStr;
    cell.textContent = d;
    cell.style.textAlign = 'center';
    cell.style.padding = '5px 0';
    cell.style.borderRadius = '6px';
    cell.style.cursor = 'pointer';
    cell.style.background = workedOut ? '#00ff77' : '#111';
    cell.style.color = workedOut ? '#000' : '#555';
    cell.addEventListener('click', () => {
      selectedDate = dateStr;
      document.querySelectorAll('#calendarGrid div').forEach(c => c.style.outline = '');
      cell.style.outline = '2px solid #FFD700';
      renderPhotos(selectedDate);
    });
    calendarGrid.appendChild(cell);
  }

  const count = Object.values(photos).flat().length;
  photoSummary.textContent = `${month} Gym Entries: ${count}`;
}

// Render photos for the selected date
function renderPhotos(date) {
  const photos = loadPhotos();
  const list = photos[date] || [];
  photoFeed.innerHTML = '';

  if (list.length === 0) {
    photoFeed.innerHTML = `<p style="text-align:center;color:#777;">No photos logged for ${date}</p>`;
    return;
  }

  const grid = document.createElement('div');
  grid.className = 'photo-grid';
  list.slice().reverse().forEach((p, idx) => {
    const div = document.createElement('div');
    div.innerHTML = `
      <img src="${p.src}" style="border-radius:10px;">
      <textarea placeholder="Add note..." data-idx="${idx}"
        style="width:100%;margin-top:6px;background:#111;color:#fff;border:1px solid #333;border-radius:6px;padding:6px;">${p.note||''}</textarea>
      <button data-idx="${idx}" class="deletePhoto" style="background:none;border:1px solid #333;color:#ff4444;border-radius:6px;padding:4px 6px;margin-top:6px;cursor:pointer;">üóëÔ∏è Delete</button>
    `;
    grid.appendChild(div);
  });
  photoFeed.appendChild(grid);

  // Save notes
  photoFeed.querySelectorAll('textarea').forEach(t => {
    t.addEventListener('input', e => {
      const i = e.target.dataset.idx;
      photos[date][i].note = e.target.value;
      savePhotos(photos);
    });
  });

  // Delete photos
  photoFeed.querySelectorAll('.deletePhoto').forEach(btn => {
    btn.addEventListener('click', e => {
      const i = e.target.dataset.idx;
      photos[date].splice(i, 1);
      savePhotos(photos);
      renderPhotos(date);
      updateCalendar();
    });
  });
}

// Initialize on load
updateCalendar();
renderPhotos(selectedDate);


// Init
initDateGreeting();
renderWins();

</script>
</body>
</html>
