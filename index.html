<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#0a0f1f">
<link rel="manifest" href="manifest.json">
<link rel="icon" href="icon-192.png">
<title>GABE OS V3 ‚Äì Royal Precision Ultra Edition</title>
<link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{
 --bg-dark:#0a0f1f;--gold:#d4af37;--navy:#08121f;--glass:rgba(255,255,255,0.05);
 --radius:16px;--trans:0.35s cubic-bezier(.4,0,.2,1);
}
html,body{margin:0;padding:0;height:100%;background:var(--bg-dark);color:#fff;
font-family:'Inter',sans-serif;-webkit-font-smoothing:antialiased;overflow:hidden;}
header{position:fixed;top:0;left:0;width:100%;height:70px;
backdrop-filter:blur(15px);background:var(--glass);display:flex;
align-items:center;justify-content:center;border-bottom:1px solid rgba(255,255,255,0.08);}
header h1{font-family:'League Spartan',sans-serif;font-size:1.4rem;letter-spacing:1px;color:var(--gold);}
#gear{position:absolute;left:20px;font-size:1.5rem;cursor:pointer;transition:var(--trans);}
#gear:hover{color:var(--gold);transform:rotate(90deg);}
main{padding-top:80px;height:calc(100% - 140px);overflow-y:auto;scroll-behavior:smooth;}
nav{position:fixed;bottom:0;width:100%;height:70px;background:var(--glass);
display:flex;justify-content:space-around;align-items:center;border-top:1px solid rgba(255,255,255,0.08);
backdrop-filter:blur(15px);}
nav button{background:none;border:none;color:#aaa;font-size:1.2rem;transition:var(--trans);}
nav button.active,nav button:hover{color:var(--gold);transform:scale(1.15);}
section{display:none;animation:fadeIn .6s ease;}
section.active{display:block;}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}

/* Focus & Wins */
#focusWins{padding:20px;}
#todayFocus input{width:100%;padding:12px;border:none;border-radius:var(--radius);
background:var(--glass);color:#fff;font-size:1rem;}
#winsList{margin-top:15px;}
.win-item{background:var(--glass);padding:10px;margin-top:8px;border-radius:var(--radius);
display:flex;justify-content:space-between;align-items:center;}
.win-item span{font-size:0.9rem;}
.win-item button{background:none;border:none;color:var(--gold);cursor:pointer;}

/* Planner */
#planner{padding:20px;}
.planner-tabs{display:flex;gap:10px;margin-bottom:15px;}
.planner-tabs button{flex:1;padding:10px;border:none;border-radius:var(--radius);
background:var(--glass);color:#fff;transition:var(--trans);}
.planner-tabs button.active{background:var(--gold);color:#000;}
textarea.planner-input{width:100%;height:300px;background:var(--glass);
border:none;border-radius:var(--radius);color:#fff;padding:10px;font-size:1rem;}
.progress{height:8px;border-radius:4px;background:#333;margin-top:10px;overflow:hidden;}
.progress-inner{height:8px;width:0;background:var(--gold);transition:width .5s ease;}

/* Workout Tracker */
#workout{padding:20px;}
.workout-category{margin-bottom:20px;}
.workout-category h3{color:var(--gold);margin:0 0 5px;}
.exercise{background:var(--glass);padding:10px;border-radius:var(--radius);margin-top:5px;}

/* Gallery */
#gallery{padding:20px;}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:5px;}
.grid img{width:100%;border-radius:6px;cursor:pointer;transition:var(--trans);}
.grid img:hover{transform:scale(1.05);}
#modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);
display:none;align-items:center;justify-content:center;flex-direction:column;}
#modal img{max-width:90%;max-height:70%;border-radius:var(--radius);}
#modal textarea{width:80%;margin-top:10px;border:none;border-radius:var(--radius);
padding:8px;background:var(--glass);color:#fff;}
#modal button{margin-top:10px;padding:8px 16px;border:none;border-radius:var(--radius);
background:var(--gold);color:#000;cursor:pointer;}

/* Media */
#media{padding:20px;}
.video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:10px;}
.video-grid iframe{width:100%;height:200px;border:none;border-radius:var(--radius);}

/* Settings Drawer */
#settingsDrawer{position:fixed;top:-400px;left:0;width:100%;background:var(--navy);
border-bottom:2px solid var(--gold);border-radius:0 0 var(--radius) var(--radius);
padding:20px;transition:var(--trans);z-index:999;}
#settingsDrawer.open{top:70px;}
#settingsDrawer h3{color:var(--gold);margin-bottom:10px;}
#settingsDrawer button, #settingsDrawer input[type=file]{width:100%;margin:6px 0;
padding:10px;border:none;border-radius:var(--radius);background:var(--glass);color:#fff;cursor:pointer;}
#settingsDrawer button:hover{background:var(--gold);color:#000;}

/* Dynamic background glow */
body::before{content:"";position:fixed;inset:0;background:radial-gradient(circle at center,var(--glass),transparent 70%);
z-index:-1;animation:shiftHue 30s infinite linear;}
@keyframes shiftHue{0%{filter:hue-rotate(0deg);}100%{filter:hue-rotate(360deg);}}
</style>
</head>
<body>
<header>
  <div id="gear">‚öôÔ∏è</div>
  <h1>GABE OS V3</h1>
</header>

<div id="settingsDrawer">
  <h3>Settings</h3>
  <button id="themeGold">Royal Gold</button>
  <button id="themeGreen">Emerald Verde</button>
  <button id="themeSilver">Titanium Silver</button>
  <button id="backupData">Backup Data (JSON)</button>
  <input type="file" id="importData" accept=".json">
  <button id="resetAll">Reset All Data</button>
  <button id="installInfo">PWA Install Info</button>
</div>

<main>
  <section id="focusWins" class="active">
    <div id="todayFocus">
      <h2>Today's Focus</h2>
      <input id="focusInput" placeholder="Enter your main focus for today...">
    </div>
    <div id="wins">
      <h2>Today's Wins</h2>
      <input id="winInput" placeholder="Add a win...">
      <button id="addWin">Add Win</button>
      <div id="winsList"></div>
    </div>
  </section>

  <section id="planner">
    <div class="planner-tabs">
      <button class="tabBtn active" data-type="daily">Daily</button>
      <button class="tabBtn" data-type="weekly">Weekly</button>
      <button class="tabBtn" data-type="yearly">Yearly</button>
    </div>
    <textarea id="plannerInput" class="planner-input" placeholder="Write your plans..."></textarea>
    <div class="progress"><div class="progress-inner"></div></div>
  </section>

  <section id="workout"></section>

  <section id="gallery">
    <input type="file" id="photoUpload" accept="image/*" multiple>
    <div class="grid" id="photoGrid"></div>
    <div id="modal">
      <img id="modalImg"><textarea id="modalNote" placeholder="Add a note..."></textarea>
      <button id="deletePhoto">Delete</button>
      <button id="closeModal">Close</button>
    </div>
  </section>

  <section id="media">
    <div class="video-grid" id="videoGrid"></div>
  </section>
</main>

<nav>
  <button data-target="focusWins" class="active">üèÅ</button>
  <button data-target="planner">üìÖ</button>
  <button data-target="workout">üí™</button>
  <button data-target="gallery">üì∏</button>
  <button data-target="media">üé¨</button>
</nav>

<script src="app.js"></script>
</body>
</html>
// === NAVIGATION ===
const sections = document.querySelectorAll("main section");
const navBtns = document.querySelectorAll("nav button");
navBtns.forEach(btn=>{
 btn.onclick=()=>{
  navBtns.forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  sections.forEach(s=>s.classList.remove("active"));
  document.getElementById(btn.dataset.target).classList.add("active");
 }
});

// === SETTINGS DRAWER ===
const gear=document.getElementById("gear"),drawer=document.getElementById("settingsDrawer");
gear.onclick=()=>drawer.classList.toggle("open");

// === THEME TOGGLES ===
const themes={
 gold:{'--gold':'#d4af37','--bg-dark':'#0a0f1f'},
 green:{'--gold':'#2affb3','--bg-dark':'#001a12'},
 silver:{'--gold':'#c0c0c0','--bg-dark':'#101010'}
};
document.getElementById("themeGold").onclick=()=>applyTheme('gold');
document.getElementById("themeGreen").onclick=()=>applyTheme('green');
document.getElementById("themeSilver").onclick=()=>applyTheme('silver');
function applyTheme(key){Object.entries(themes[key]).forEach(([v,val])=>document.documentElement.style.setProperty(v,val));localStorage.setItem("theme",key);}
const savedTheme=localStorage.getItem("theme");if(savedTheme)applyTheme(savedTheme);

// === FOCUS & WINS ===
const focusInput=document.getElementById("focusInput");
const winInput=document.getElementById("winInput");
const addWin=document.getElementById("addWin");
const winsList=document.getElementById("winsList");

function getTodayKey(){return new Date().toISOString().slice(0,10);}
function loadFocus(){const key="focus-"+getTodayKey();focusInput.value=localStorage.getItem(key)||"";}
function saveFocus(){localStorage.setItem("focus-"+getTodayKey(),focusInput.value);}
focusInput.addEventListener("input",saveFocus);
loadFocus();

// Wins
function loadWins(){
 const key="wins-"+getTodayKey();
 const arr=JSON.parse(localStorage.getItem(key)||"[]");
 winsList.innerHTML="";
 arr.forEach((w,i)=>addWinEl(w.text,w.time,i));
}
function addWinEl(text,time,index){
 const div=document.createElement("div");div.className="win-item";
 div.innerHTML=`<span>${text} <small>${time}</small></span><button>‚úñ</button>`;
 div.querySelector("button").onclick=()=>{removeWin(index);};
 winsList.appendChild(div);
}
function addNewWin(){
 const text=winInput.value.trim();if(!text)return;
 const key="wins-"+getTodayKey();
 const arr=JSON.parse(localStorage.getItem(key)||"[]");
 const time=new Date().toLocaleTimeString();
 arr.push({text,time});localStorage.setItem(key,JSON.stringify(arr));
 winInput.value="";loadWins();
}
function removeWin(i){
 const key="wins-"+getTodayKey();
 const arr=JSON.parse(localStorage.getItem(key)||"[]");
 arr.splice(i,1);localStorage.setItem(key,JSON.stringify(arr));loadWins();
}
addWin.onclick=addNewWin;
loadWins();

// === PLANNER ===
const plannerBtns=document.querySelectorAll(".tabBtn");
const plannerInput=document.getElementById("plannerInput");
const progressInner=document.querySelector(".progress-inner");
plannerBtns.forEach(b=>b.onclick=()=>{
 plannerBtns.forEach(x=>x.classList.remove("active"));
 b.classList.add("active");
 loadPlanner(b.dataset.type);
});
function plannerKey(type){return "planner-"+type;}
function loadPlanner(type){
 plannerInput.dataset.type=type;
 plannerInput.value=localStorage.getItem(plannerKey(type))||"";
 updateProgress();
}
function savePlanner(){localStorage.setItem(plannerKey(plannerInput.dataset.type),plannerInput.value);updateProgress();}
plannerInput.addEventListener("input",savePlanner);
function updateProgress(){
 const len=plannerInput.value.length;progressInner.style.width=Math.min(len/2000*100,100)+"%";
}
loadPlanner("daily");

// === WORKOUT TRACKER ===
const workoutSec=document.getElementById("workout");
const categories=["Chest","Back","Arms","Legs","Core","Cardio"];
function loadWorkouts(){
 workoutSec.innerHTML="";
 const data=JSON.parse(localStorage.getItem("workouts")||"{}");
 categories.forEach(cat=>{
  const wrap=document.createElement("div");wrap.className="workout-category";
  wrap.innerHTML=`<h3>${cat}</h3><button data-cat="${cat}">+ Add Exercise</button><div class="list"></div>`;
  const list=wrap.querySelector(".list");
  (data[cat]||[]).forEach((ex,i)=>{
    const div=document.createElement("div");div.className="exercise";
    div.innerHTML=`${ex.name} ‚Äì ${ex.sets}x${ex.reps}@${ex.weight} kg <button data-cat="${cat}" data-i="${i}">‚úñ</button>`;
    div.querySelector("button").onclick=()=>{data[cat].splice(i,1);localStorage.setItem("workouts",JSON.stringify(data));loadWorkouts();};
    list.appendChild(div);
  });
  wrap.querySelector("button").onclick=()=>addExercise(cat);
  workoutSec.appendChild(wrap);
 });
}
function addExercise(cat){
 const name=prompt("Exercise name");if(!name)return;
 const sets=prompt("Sets?"),reps=prompt("Reps?"),weight=prompt("Weight?");
 const data=JSON.parse(localStorage.getItem("workouts")||"{}");
 if(!data[cat])data[cat]=[];
 data[cat].push({name,sets,reps,weight});
 localStorage.setItem("workouts",JSON.stringify(data));
 loadWorkouts();
}
loadWorkouts();

// === GALLERY ===
const photoInput=document.getElementById("photoUpload");
const photoGrid=document.getElementById("photoGrid");
const modal=document.getElementById("modal");
const modalImg=document.getElementById("modalImg");
const modalNote=document.getElementById("modalNote");
const deletePhoto=document.getElementById("deletePhoto");
const closeModal=document.getElementById("closeModal");
let currentIndex=-1;
function loadPhotos(){
 const arr=JSON.parse(localStorage.getItem("photos")||"[]");
 photoGrid.innerHTML="";
 arr.forEach((p,i)=>{
  const img=document.createElement("img");img.src=p.src;
  img.onclick=()=>openModal(i);photoGrid.appendChild(img);
 });
}
function openModal(i){
 const arr=JSON.parse(localStorage.getItem("photos")||"[]");
 const p=arr[i];currentIndex=i;
 modalImg.src=p.src;modalNote.value=p.note||"";modal.style.display="flex";
}
closeModal.onclick=()=>{modal.style.display="none";};
deletePhoto.onclick=()=>{
 const arr=JSON.parse(localStorage.getItem("photos")||"[]");
 arr.splice(currentIndex,1);localStorage.setItem("photos",JSON.stringify(arr));
 modal.style.display="none";loadPhotos();
};
modalNote.oninput=()=>{
 const arr=JSON.parse(localStorage.getItem("photos")||"[]");
 if(arr[currentIndex]){arr[currentIndex].note=modalNote.value;localStorage.setItem("photos",JSON.stringify(arr));}
};
photoInput.onchange=e=>{
 const files=[...e.target.files];
 const arr=JSON.parse(localStorage.getItem("photos")||"[]");
 files.forEach(f=>{
  const reader=new FileReader();
  reader.onload=()=>{arr.push({src:reader.result,note:""});localStorage.setItem("photos",JSON.stringify(arr));loadPhotos();};
  reader.readAsDataURL(f);
 });
};
loadPhotos();

// === MEDIA CENTER ===
const vids=[
 "https://www.youtube.com/embed/ZXsQAXx_ao0",
 "https://www.youtube.com/embed/26U_seo0a1g",
 "https://www.youtube.com/embed/KxGRhd_iWuE"
];
const vGrid=document.getElementById("videoGrid");
vids.forEach(v=>{
 const f=document.createElement("iframe");f.src=v+"?rel=0";vGrid.appendChild(f);
});

// === SETTINGS: BACKUP/IMPORT/RESET ===
document.getElementById("backupData").onclick=()=>{
 const data={localStorage:Object.fromEntries(Object.entries(localStorage))};
 const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
 const a=document.createElement("a");a.href=URL.createObjectURL(blob);a.download="gabeos_backup.json";a.click();
};
document.getElementById("importData").onchange=e=>{
 const f=e.target.files[0];if(!f)return;
 const r=new FileReader();
 r.onload=()=>{const json=JSON.parse(r.result);
  Object.entries(json.localStorage||{}).forEach(([k,v])=>localStorage.setItem(k,v));
  alert("Data imported! Reloading...");location.reload();
 };
 r.readAsText(f);
};
document.getElementById("resetAll").onclick=()=>{
 if(confirm("Erase all data?")){localStorage.clear();location.reload();}
};
document.getElementById("installInfo").onclick=()=>alert("To install on iPhone: Tap Share ‚Üí Add to Home Screen.");

// === DYNAMIC BACKGROUND TIME-BASED ===
function setBgByTime(){
 const h=new Date().getHours();
 let bg;
 if(h<12)bg="linear-gradient(180deg,#0a2342,#001933)";
 else if(h<18)bg="linear-gradient(180deg,#0a0f1f,#12203f)";
 else bg="linear-gradient(180deg,#000814,#001233)";
 document.body.style.background=bg;
}
setBgByTime();

