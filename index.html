<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0a0a0a">
<title>Gabe OS</title>
<link rel="manifest" href="manifest.json">
<style>
/* ‚ú® LOUIS VUITTON INSPIRED LIGHT THEME ‚Äî MOBILE FIXED */
body {
  <body>
  <header id="appHeader">
    <h1>CONTROL ROOM</h1>
  </header>
  background: linear-gradient(180deg, #faf8f6, #f3f1ee);
  font-family: 'Inter', sans-serif;
  color: #222;
  margin: 0;
  padding: 0;
}

section {
  max-width: 620px;
  margin: 110px auto 60px;
  padding: 24px;
  border-radius: 18px;
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(14px);
  border: 1px solid rgba(206, 175, 95, 0.3);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
  box-sizing: border-box;
}

section h2 {
  font-family: 'League Spartan', sans-serif;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: #a98d37;
  margin-bottom: 10px;
}

section input[type="text"] {
  width: calc(100% - 28px);
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid #e5e2dc;
  border-radius: 10px;
  padding: 14px;
  color: #333;
  font-family: 'Inter', sans-serif;
  font-size: 0.95rem;
  outline: none;
  transition: border 0.2s ease, box-shadow 0.2s ease;
  box-sizing: border-box;
}
section input[type="text"]:focus {
  border: 1px solid #c7a53d;
  box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.15);
}

section button {
  background: linear-gradient(90deg, #d4af37, #f0d886);
  color: #222;
  border: none;
  padding: 10px 20px;
  border-radius: 10px;
  font-family: 'League Spartan', sans-serif;
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: opacity 0.25s ease, transform 0.15s ease;
}
section button:hover {
  opacity: 0.85;
  transform: translateY(-1px);
}

section:hover {
  border-color: rgba(212, 175, 55, 0.5);
  box-shadow: 0 12px 25px rgba(212, 175, 55, 0.08);
}

/* Bottom nav fixed */
#bottomNav {
  position: fixed;
  bottom: 0;
  width: 100%;
  display: flex;
  justify-content: space-around;
  background: rgba(255, 255, 255, 0.9);
  border-top: 1px solid rgba(212, 175, 55, 0.25);
  backdrop-filter: blur(12px);
  z-index: 999;
  padding-bottom: calc(env(safe-area-inset-bottom) + 6px);
}
#bottomNav button {
  flex: 1;
  padding: 16px 0;
  font-size: 0.9rem;
  font-weight: 600;
  font-family: 'League Spartan', sans-serif;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #222;
  background: none;
  border: none;
  transition: color 0.3s, border 0.3s;
}
#bottomNav button.active {
  color: #a98d37;
  border-top: 2px solid #d4af37;
}
/* ‚ú® CONTROL ROOM HEADER with animated gold accent line */
#appHeader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 65px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(16px);
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 1000;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  border-bottom: none;
  opacity: 0;
  transform: translateY(-10px);
  animation: headerFadeIn 0.8s ease-out forwards;
}

/* Thin gold accent line under header */
#appHeader::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 10%;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, #d4af37, #f0d886);
  border-radius: 2px;
  animation: goldLineSlide 1s ease-out 0.5s forwards;
}

/* Header text */
#appHeader h1 {
  font-family: 'League Spartan', sans-serif;
  font-size: 1.2rem;
  color: #a98d37;
  letter-spacing: 2px;
  text-transform: uppercase;
  font-weight: 600;
  margin: 0;
  animation: headerTextFade 1s ease-out 0.3s forwards;
}

/* Animation keyframes */
@keyframes headerFadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes goldLineSlide {
  from { width: 0; opacity: 0; }
  to { width: 80%; opacity: 1; }
}

@keyframes headerTextFade {
  from { opacity: 0; letter-spacing: 4px; }
  to { opacity: 1; letter-spacing: 2px; }
}



#appHeader h1 {
  font-family: 'League Spartan', sans-serif;
  font-size: 1.1rem;
  color: #a98d37;
  letter-spacing: 2px;
  text-transform: uppercase;
  font-weight: 600;
}

/* Hero section */
#hero {
  text-align: center;
  padding: 80px 20px 40px;
}
#hero h1 {
  font-family: 'League Spartan', sans-serif;
  font-size: 1.6rem;
  color: #222;
  margin-bottom: 6px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
}
#hero p {
  font-size: 0.95rem;
  color: #a98d37;
  letter-spacing: 1px;
  text-transform: uppercase;
}
/* ‚ú® CONTROL ROOM HEADER */
#appHeader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 60px;
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(212, 175, 55, 0.3);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

#appHeader h1 {
  font-family: 'League Spartan', sans-serif;
  font-size: 1.1rem;
  color: #a98d37;
  letter-spacing: 2px;
  text-transform: uppercase;
  font-weight: 600;
}

/* Add space below header so content doesn‚Äôt hide behind it */
section {
  margin-top: 100px;
}

</style>

</head>
<body>
<header id="appHeader">
  <h1>CONTROL ROOM</h1>
</header>

<!-- ‚ú® Louis Vuitton‚Äìstyle Hero Section -->
<section id="hero">
  <div class="hero-inner">
    <h1>Good Morning, Gabe.</h1>
    <p>Your next chapter begins now.</p>
  </div>
</section>


<div class="container">

 
 <!-- üéØ FOCUS + WINS COMBINED -->
<section id="focusWinsSection">
  <div class="card">
    <div class="card-header"><div class="card-title">üéØ TODAY'S FOCUS</div></div>
    <div class="card-body">
      <input type="text" id="focusInput" placeholder="LOCK IN YOUR MISSION..." class="focus-input">
      <div id="focusTips" style="margin-top:10px;font-size:14px;color:#d4af37;"></div>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><div class="card-title">üèÜ WINS</div></div>
    <div class="card-body">
      <button class="btn" id="addWinBtn">+ ADD WIN</button>
      <div id="winInputContainer" style="display:none;margin-top:15px;">
        <input type="text" id="winInput" class="win-input" placeholder="WHAT DID YOU EXECUTE?">
        <button class="btn" id="winSubmitBtn" style="margin-top:10px;">LOG IT</button>
      </div>
      <ul id="winsList" class="wins-list"></ul>
    </div>
  </div>
</section>


<!-- üé• MEDIA TAB -->
<section id="mediaSection" style="display:none;">
  <div class="card">
    <div class="card-header"><div class="card-title">MEDIA CENTER</div></div>
    <div class="card-body video-wrapper">

      <!-- Moved from Focus page -->
      <iframe width="100%" height="220"
        src="https://www.youtube.com/embed/UNQhuFL6CWg"
        title="Goggins ‚Äì Stay Hard"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen></iframe>

      <iframe width="100%" height="200"
        src="https://www.youtube.com/embed/hbkZrOU1Zag"
        title="Kobe Mamba Mindset" allowfullscreen></iframe>

      <iframe width="100%" height="200"
        src="https://www.youtube.com/embed/2fC8R6E0Xyw"
        title="Greg Plitt Motivation" allowfullscreen></iframe>
    </div>
  </div>
</section>

<!-- üí™ FINAL WORKOUT TRACKER -->
<section id="workoutSection" style="display:none;">
  <div class="card">
    <div class="card-header">
      <div class="card-title">WORKOUT TRACKER</div>
    </div>
    <div class="card-body" id="workoutList"></div>
  </div>
</section>

<!-- üì∏ GYM / PHOTO TRACKER (FINAL INSTAGRAM EDITION) -->
<section id="photosSection" style="display:none;">
  <div class="card">
    <div class="card-header">
      <div class="card-title">GYM PROGRESS LOG</div>
    </div>
    <div class="card-body">
      <input type="file" id="photoInput" accept="image/*" style="margin-bottom:10px;">
      <div id="photoSummary" style="font-size:14px;color:#d4af37;margin-bottom:10px;"></div>

      <!-- Calendar -->
      <div id="calendarGrid" style="display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:12px;"></div>

      <!-- Streak -->
<div id="streakBar" style="font-weight:600;color:#d4af37;text-align:center;margin-bottom:12px;">
  üî• Current Streak: 0 days | üèÖ Longest Streak: 0 days
  <div id="progressOuter" style="width:100%;height:10px;background:#222;border-radius:6px;overflow:hidden;margin-top:4px;">
    <div id="progressInner" style="height:100%;background:#d4af37;width:0%;transition:width 0.4s ease;"></div>
  </div>
</div>

<!-- Instagram-style grid -->

      <!-- Instagram-style grid -->
      <div id="photoFeed" class="photo-grid"></div>
    </div>
  </div>
</section>
<style>
/* ‚ú® LV LIGHT GYM TRACKER */
.photo-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
  gap: 8px;
}

.photo-card {
  position: relative;
  border-radius: 10px;
  overflow: hidden;
  background: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(212, 175, 55, 0.25);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.3s ease;
}
.photo-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 24px rgba(212, 175, 55, 0.15);
}
.photo-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  aspect-ratio: 1 / 1;
}

/* Modal viewer */
#photoModal {
  position: fixed;
  inset: 0;
  background: rgba(255, 255, 255, 0.95);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  padding: 20px;
  border-radius: 16px;
  border: 1px solid rgba(212, 175, 55, 0.2);
  box-shadow: 0 12px 35px rgba(0,0,0,0.15);
}
#photoModal.hidden { display: none; }
#photoModal img {
  max-width: 90%;
  max-height: 70vh;
  border-radius: 10px;
  box-shadow: 0 0 12px rgba(212, 175, 55, 0.4);
}
#modalNote {
  margin-top: 12px;
  width: 90%;
  background: rgba(255,255,255,0.9);
  color: #333;
  border: 1px solid rgba(212,175,55,0.3);
  border-radius: 6px;
  padding: 8px;
  font-size: 14px;
}
#closeModal, #deletePhoto {
  background: linear-gradient(90deg, #d4af37, #f0d886);
  border: none;
  color: #222;
  border-radius: 8px;
  padding: 10px 18px;
  margin-top: 10px;
  margin-left: 8px;
  margin-right: 8px;
  cursor: pointer;
  font-family: 'League Spartan', sans-serif;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 0.85rem;
  transition: opacity 0.25s ease;
  box-sizing: border-box;
}

#closeModal:hover, #deletePhoto:hover {
  opacity: 0.85;
}

/* Calendar Grid */
#calendarGrid div {
  background: rgba(255,255,255,0.9);
  border-radius: 8px;
  border: 1px solid rgba(212,175,55,0.2);
  color: #333;
  font-size: 0.8rem;
  text-align: center;
  padding: 10px 0;
  transition: all 0.2s ease;
}
#calendarGrid div.active {
  background: linear-gradient(90deg, #d4af37, #f0d886);
  color: #111;
  font-weight: 600;
  box-shadow: 0 0 6px rgba(212,175,55,0.3);
}
#calendarGrid div.logged {
  background: rgba(212, 175, 55, 0.15);
  color: #a98d37;
  font-weight: 500;
}
</style>

<!-- Modal -->
<div id="photoModal" class="hidden">
  <img id="modalImg" src="" alt="">
  <textarea id="modalNote" placeholder="Add a note..."></textarea>
  <button id="deletePhoto">üóëÔ∏è Delete</button>
  <button id="closeModal">Close</button>
</div>

<script>
let selectedDate = new Date().toISOString().split('T')[0];
const photoInput=document.getElementById('photoInput');
const photoFeed=document.getElementById('photoFeed');
const calendarGrid=document.getElementById('calendarGrid');
const modal=document.getElementById('photoModal');
const modalImg=document.getElementById('modalImg');
const modalNote=document.getElementById('modalNote');
const deletePhotoBtn=document.getElementById('deletePhoto');
const closeModalBtn=document.getElementById('closeModal');

const loadPhotos=()=>JSON.parse(localStorage.getItem('gymPhotos')||'{}');
const savePhotos=d=>localStorage.setItem('gymPhotos',JSON.stringify(d));

// Upload handler
photoInput.addEventListener('change',e=>{
  const file=e.target.files[0];
  if(!file)return;
  const reader=new FileReader();
  reader.onload=ev=>{
    const data=loadPhotos();
    if(!data[selectedDate])data[selectedDate]=[];
    data[selectedDate].push({src:ev.target.result,note:'',date:selectedDate});
    savePhotos(data);
    renderPhotos(selectedDate);
    updateCalendar();
    updateStreakBar();
  };
  reader.readAsDataURL(file);
});

// Calendar render
function updateCalendar(){
  const now=new Date();
  const month=now.toISOString().slice(0,7);
  const daysInMonth=new Date(now.getFullYear(),now.getMonth()+1,0).getDate();
  const data=loadPhotos();

  calendarGrid.innerHTML='';
  for(let d=1;d<=daysInMonth;d++){
    const dateStr=`${month}-${String(d).padStart(2,'0')}`;
    const div=document.createElement('div');
    div.textContent=d;
    if(data[dateStr]?.length)div.classList.add('logged');
    if(dateStr===selectedDate)div.classList.add('active');
    div.onclick=()=>{
      selectedDate=dateStr;
      updateCalendar();
      renderPhotos(dateStr);
    };
    calendarGrid.appendChild(div);
  }
  const total=Object.values(data).flat().length;
  document.getElementById('photoSummary').textContent=`${month} Gym Entries: ${total}`;
}

// Render grid
function renderPhotos(date){
  const data=loadPhotos();
  const list=data[date]||[];
  photoFeed.innerHTML='';
  if(!list.length){
    photoFeed.innerHTML=`<p style="color:#777;text-align:center;">No photos for ${date}</p>`;
    return;
  }
  const grid=document.createElement('div');
  grid.className='photo-grid';
  list.forEach((p,idx)=>{
    const card=document.createElement('div');
    card.className='photo-card';
    card.innerHTML=`<img src="${p.src}" data-idx="${idx}">`;
    grid.appendChild(card);
  });
  photoFeed.appendChild(grid);
}

// Modal logic
photoFeed.addEventListener('click',e=>{
  if(e.target.tagName==='IMG'){
    const idx=e.target.dataset.idx;
    const data=loadPhotos();
    const current=data[selectedDate][idx];
    modalImg.src=current.src;
    modalNote.value=current.note||'';
    modal.dataset.idx=idx;
    modal.classList.remove('hidden');
  }
});

modalNote.addEventListener('input',e=>{
  const data=loadPhotos();
  const idx=modal.dataset.idx;
  if(data[selectedDate]&&data[selectedDate][idx]){
    data[selectedDate][idx].note=e.target.value;
    savePhotos(data);
  }
});

deletePhotoBtn.addEventListener('click',()=>{
  const data=loadPhotos();
  const idx=modal.dataset.idx;
  data[selectedDate].splice(idx,1);
  savePhotos(data);
  modal.classList.add('hidden');
  renderPhotos(selectedDate);
  updateCalendar();
  updateStreakBar();
});

closeModalBtn.addEventListener('click',()=>modal.classList.add('hidden'));

// Streak logic
function updateStreakBar(){
  const data=loadPhotos();
  const dates=Object.keys(data).sort();
  let streak=0,longest=0;
  for(let i=0;i<dates.length;i++){
    if(i>0){
      const diff=(new Date(dates[i])-new Date(dates[i-1]))/(1000*60*60*24);
      if(diff===1)streak++;else streak=1;
    }else streak=1;
    if(streak>longest)longest=streak;
  }
  document.getElementById('streakBar').innerHTML=
    `üî• Current Streak: ${streak} days | üèÖ Longest Streak: ${longest} days
     <div id="progressOuter"><div id="progressInner" style="width:${Math.min((streak/30)*100,100)}%"></div></div>`;
}

updateCalendar();
renderPhotos(selectedDate);
updateStreakBar();
</script>

  <!-- ‚öôÔ∏è OPS TAB -->
  <section id="opsSection" style="display:none;">
    <div class="card">
      <div class="card-header"><div class="card-title">OPS // TRAVEL // SCHEDULE</div></div>
      <div class="card-body" style="text-align:center;">
        <div style="font-size:32px;opacity:0.3;">‚úàÔ∏è</div>
        <div style="font-size:13px;color:#666;letter-spacing:1px;">LOGISTICS MODULE COMING SOON</div>
      </div>
    </div>
  </section>

</div>

<!-- Bottom Navigation -->
<nav id="bottomNav">
  <button data-target="focusWinsSection" class="active">Focus</button>
  <button data-target="mediaSection">Media</button>
  <button data-target="workoutSection">Workout</button>
  <button data-target="photosSection">Photos</button>
  <button data-target="opsSection">Settings</button>
</nav>

<script>
function initDateGreeting(){
  const now=new Date();
  const options={month:'short',day:'numeric',year:'numeric'};
  const dateStr=now.toLocaleDateString('en-US',options).toUpperCase().replace(',','');
  document.getElementById('dateGreeting').textContent=`${dateStr} ‚Äî STAY LOCKED IN`;
}

// --- Wins logic ---
function loadWins(){return JSON.parse(localStorage.getItem('wins')||'[]');}
function saveWins(w){localStorage.setItem('wins',JSON.stringify(w));}
function renderWins(){
  const wins=loadWins();const list=document.getElementById('winsList');
  if(!wins.length){list.innerHTML='<div class="empty-state">NO WINS LOGGED YET.</div>';return;}
  list.innerHTML=wins.map(win=>`
    <li class="win-item">
      <div class="win-text">${win.text}</div>
      <div class="win-timestamp">${win.time}</div>
    </li>`).join('');
}
document.getElementById('addWinBtn').onclick=()=>{
  document.getElementById('winInputContainer').style.display='block';
  document.getElementById('winInput').focus();
};
document.getElementById('winSubmitBtn').onclick=()=>{
  const val=document.getElementById('winInput').value.trim();
  if(!val)return;
  const wins=loadWins();
  wins.unshift({text:val,time:new Date().toLocaleTimeString()});
  saveWins(wins);
  document.getElementById('winInput').value='';
  document.getElementById('winInputContainer').style.display='none';
  renderWins();
};

// --- Focus logic ---
const focusInput=document.getElementById('focusInput');
focusInput.value=localStorage.getItem('todayFocus')||'';
focusInput.addEventListener('input',e=>{
  localStorage.setItem('todayFocus',e.target.value);
});
// --- Focus Assistant ---
const focusTips = document.getElementById('focusTips');

function getFocusTips(focus) {
  focus = focus.toLowerCase();
  if (focus.includes('gym') || focus.includes('workout') || focus.includes('train')) {
    return [
      "Lay your gear out the night before.",
      "Hydrate and stretch early.",
      "Win the morning ‚Äî own the day."
    ];
  }
  if (focus.includes('read') || focus.includes('study')) {
    return [
      "Silence notifications.",
      "Set a 20-minute timer ‚Äî no distractions.",
      "Highlight one powerful line."
    ];
  }
  if (focus.includes('work') || focus.includes('project')) {
    return [
      "Start with the hardest task.",
      "Block one deep-work session.",
      "Momentum > perfection."
    ];
  }
  if (focus.includes('rest') || focus.includes('recovery')) {
    return [
      "Unplug fully.",
      "Reflect ‚Äî progress needs rest.",
      "Tomorrow starts with how you recharge today."
    ];
  }
  return [
    "Focus is power ‚Äî stay locked in.",
    "Discipline beats motivation.",
    "Small steps today build your tomorrow."
  ];
}

function showTips(focus) {
  const tips = getFocusTips(focus);
  const randomTip = tips[Math.floor(Math.random() * tips.length)];

  focusTips.classList.remove('visible'); // reset fade
  setTimeout(() => {
    focusTips.textContent = randomTip;
    focusTips.classList.add('visible'); // fade in
  }, 50);
}

// When typing, update tips
let focusTimer;
focusInput.addEventListener('input', e => {
  clearTimeout(focusTimer);
  const val = e.target.value.trim();

  if (val.length === 0) {
    focusTips.textContent = '';
    return;
  }

  // Wait until the user stops typing for 1 second
  focusTimer = setTimeout(() => {
    showTips(val);
  }, 1000);
});

// Also show a tip when user presses Enter
focusInput.addEventListener('keydown', e => {
  if (e.key === 'Enter') {
    e.preventDefault();
    const val = e.target.value.trim();
    if (val.length > 0) showTips(val);
  }
});
focusInput.addEventListener('keydown', e => {
  if (e.key === 'Enter') {
    e.preventDefault();
    const val = e.target.value.trim();
    if (val.length > 0) showTips(val);
  }
});

// --- Shuffle button logic (safe) ---
const shuffleTipBtn = document.getElementById('shuffleTip');
if (shuffleTipBtn) {
  shuffleTipBtn.addEventListener('click', () => {
    const val = focusInput.value.trim();
    if (val.length > 0) showTips(val);
  });
}


// --- Navigation ---
// --- Navigation with transitions and highlights ---
const navButtons = document.querySelectorAll('#bottomNav button');
const sections = document.querySelectorAll('section');

function showSection(target) {
  sections.forEach(sec => {
    if (sec.id === target) {
      sec.style.display = 'block';
      sec.classList.add('active');
    } else {
      sec.style.display = 'none';
      sec.classList.remove('active');
    }
  });

  // Highlight active button
  navButtons.forEach(b => b.classList.toggle('active', b.dataset.target === target));
}

navButtons.forEach(btn => {
  btn.addEventListener('click', () => showSection(btn.dataset.target));
});

// Show default section on load
showSection('focusWinsSection');
  // === üí™ WORKOUT TRACKER SYSTEM ===

// --- Rotation Logic ---
const startDate = new Date("2025-10-27");
const today = new Date();
const dayDiff = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
const currentCycle = Math.floor(dayDiff / 14) % 2 === 0 ? "A" : "B";

const workoutsA = {
  Monday: [
    "Incline Dumbbell Press ‚Äì 4√ó10",
    "Flat Barbell Bench Press ‚Äì 4√ó8",
    "Cable Fly (High to Low) ‚Äì 3√ó15",
    "Dips (Weighted if possible) ‚Äì 3√óFailure",
    "Push-ups ‚Äì 2√óFailure",
    "Hanging Knee Raises ‚Äì 3√ó20",
    "Plank ‚Äì 3√ó1 min"
  ],
  Tuesday: [
    "Back Squat ‚Äì 5√ó8",
    "Walking Lunges ‚Äì 3√ó20 steps",
    "Romanian Deadlift ‚Äì 4√ó10",
    "Leg Press ‚Äì 3√ó12",
    "Seated Calf Raise ‚Äì 4√ó15",
    "Standing Calf Raise ‚Äì 4√ó20"
  ],
  Wednesday: [
    "Sprints ‚Äì 10 √ó 60 m",
    "Incline Treadmill Run (20 min)",
    "Cable Crunch ‚Äì 3√ó20",
    "Russian Twist ‚Äì 3√ó30",
    "Plank Circuit ‚Äì 3 rounds"
  ],
  Thursday: [
    "Pull-ups ‚Äì 4√óFailure",
    "Barbell Row ‚Äì 4√ó10",
    "Lat Pulldown ‚Äì 3√ó12",
    "Seated Cable Row ‚Äì 3√ó12",
    "Face Pull ‚Äì 3√ó15",
    "EZ-Bar Curl ‚Äì 4√ó12",
    "Hammer Curl ‚Äì 3√ó12"
  ],
  Friday: [
    "Military Press ‚Äì 4√ó10",
    "Arnold Press ‚Äì 4√ó10",
    "Lateral Raise ‚Äì 3√ó15",
    "Front Raise ‚Äì 3√ó15",
    "Cable Crossover ‚Äì 3√ó12",
    "Tricep Pushdown ‚Äì 3√ó15",
    "Overhead Extension ‚Äì 3√ó12"
  ],
  Saturday: [
    "Core Circuit (5 Rounds): Hanging Leg Raises + Mountain Climbers + Flutter Kicks",
    "Battle Ropes ‚Äì 3√ó1 min",
    "Run 2 miles steady pace",
    "Stretch / Foam Roll ‚Äì 10 min"
  ],
  Sunday: ["Rest / Active Recovery (Walk, Swim, Mobility)"]
};

const workoutsB = {
  Monday: [
    "Bench Press ‚Äì 5√ó10",
    "Incline DB Press ‚Äì 4√ó12",
    "Decline Press ‚Äì 3√ó12",
    "Cable Fly ‚Äì 4√ó15",
    "Push-ups ‚Äì 2√óFailure"
  ],
  Tuesday: [
    "Deadlift ‚Äì 5√ó5",
    "Front Squat ‚Äì 4√ó8",
    "Leg Press ‚Äì 4√ó12",
    "Leg Extension ‚Äì 4√ó15",
    "Standing Calf Raise ‚Äì 4√ó20"
  ],
  Wednesday: [
    "Pull-ups ‚Äì 4√óFailure",
    "T-Bar Row ‚Äì 4√ó10",
    "Lat Pulldown ‚Äì 3√ó12",
    "Seated Row ‚Äì 3√ó12",
    "Preacher Curl ‚Äì 3√ó12",
    "Hammer Curl ‚Äì 3√ó12"
  ],
  Thursday: [
    "Arnold Press ‚Äì 4√ó10",
    "Upright Row ‚Äì 4√ó10",
    "Lateral Raise Superset Front Raise ‚Äì 3√ó12 each",
    "Rear Delt Fly ‚Äì 3√ó15",
    "Tricep Dips ‚Äì 3√óFailure",
    "Overhead Cable Extension ‚Äì 3√ó12"
  ],
  Friday: [
    "Romanian Deadlift ‚Äì 4√ó10",
    "Walking Lunge ‚Äì 4√ó20 steps",
    "Bulgarian Split Squat ‚Äì 3√ó12",
    "Leg Curl ‚Äì 3√ó15",
    "Ab Wheel ‚Äì 3√ó20"
  ],
  Saturday: [
    "Sprints ‚Äì 6√ó100 m",
    "HIIT Bike ‚Äì 20 min",
    "Hanging Leg Raises ‚Äì 3√ó15",
    "Weighted Sit-ups ‚Äì 3√ó20"
  ],
  Sunday: ["Rest / Mobility / Stretch"]
};

const workouts = currentCycle === "A" ? workoutsA : workoutsB;

function loadWorkoutData() {
  return JSON.parse(localStorage.getItem("workoutProgress") || "{}");
}
function saveWorkoutData(data) {
  localStorage.setItem("workoutProgress", JSON.stringify(data));
}

function renderWorkouts() {
  const container = document.getElementById("workoutList");
  if (!container) return;
  const progress = loadWorkoutData();
  container.innerHTML = "";

  Object.keys(workouts).forEach(day => {
    const dayDiv = document.createElement("div");
    dayDiv.classList.add("workout-day");
    dayDiv.innerHTML = `<h3 style="cursor:pointer;color:#d4af37;margin-top:15px;">${day}</h3>`;
    const exDiv = document.createElement("div");
    exDiv.classList.add("exercise-list");
    exDiv.style.display = "none";

    workouts[day].forEach(ex => {
      const key = `${currentCycle}_${day}_${ex}`;
      const record = progress[key] || { done: false, weight: "", reps: "" };

      const row = document.createElement("div");
      row.classList.add("exercise-row");
      row.style.display = "flex";
      row.style.justifyContent = "space-between";
      row.style.alignItems = "center";
      row.style.margin = "8px 0";
      row.innerHTML = `
        <span style="flex:1;">${ex}</span>
        <input type="number" placeholder="lbs" value="${record.weight}"
          style="width:60px;background:#111;border:1px solid #333;color:#fff;padding:4px;border-radius:6px;margin-right:6px;">
        <input type="number" placeholder="reps" value="${record.reps}"
          style="width:55px;background:#111;border:1px solid #333;color:#fff;padding:4px;border-radius:6px;margin-right:6px;">
        <input type="checkbox" ${record.done ? "checked" : ""}>
      `;

      const [weightInput, repsInput, checkbox] = row.querySelectorAll("input");
      const update = () => {
        progress[key] = {
          done: checkbox.checked,
          weight: weightInput.value,
          reps: repsInput.value
        };
        saveWorkoutData(progress);
      };
      [weightInput, repsInput, checkbox].forEach(el =>
        el.addEventListener("input", update)
      );

      exDiv.appendChild(row);
    });

    dayDiv.appendChild(exDiv);
    container.appendChild(dayDiv);

    // Toggle dropdown
    dayDiv.querySelector("h3").addEventListener("click", () => {
      exDiv.style.display = exDiv.style.display === "none" ? "block" : "none";
    });
  });

  const cycleNote = document.createElement("p");
  cycleNote.style.textAlign = "center";
  cycleNote.style.color = "#888";
  cycleNote.style.marginTop = "20px";
  cycleNote.textContent =
    "Current Cycle: " +
    (currentCycle === "A"
      ? "A ‚Äì CR7 / Plitt (Lean Power)"
      : "B ‚Äì Arnold / Plitt (Volume)");
  container.appendChild(cycleNote);
}

renderWorkouts();
// === üéØ RESET FOCUS AT MIDNIGHT ===

// Function to clear today's focus at midnight
function resetFocusAtMidnight() {
  const now = new Date();
  const msUntilMidnight =
    new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0) - now;

  setTimeout(() => {
    localStorage.removeItem("focusText");
    const focusInput = document.getElementById("focusInput");
    if (focusInput) focusInput.value = "";
    console.log("Focus reset at midnight");

    // Schedule again for next midnight
    resetFocusAtMidnight();
  }, msUntilMidnight);
}

// Run on load
resetFocusAtMidnight();

</script>


<!-- ========================= GYM / PHOTO TRACKER (INSTAGRAM EDITION) ========================= -->

  <img id="modalImg" src="" alt="">
  <textarea id="modalNote" placeholder="Add a note..."></textarea>
  <button id="deletePhoto">üóëÔ∏è Delete</button>
  <button id="closeModal">Close</button>
</div>

<script>
let selectedDate = new Date().toISOString().split('T')[0];
const photoInput = document.getElementById('photoInput');
const photoFeed = document.getElementById('photoFeed');
const calendarGrid = document.getElementById('calendarGrid');
const modal = document.getElementById('photoModal');
const modalImg = document.getElementById('modalImg');
const modalNote = document.getElementById('modalNote');
const deletePhotoBtn = document.getElementById('deletePhoto');
const closeModalBtn = document.getElementById('closeModal');

const loadPhotos = () => JSON.parse(localStorage.getItem('gymPhotos') || '{}');
const savePhotos = d => localStorage.setItem('gymPhotos', JSON.stringify(d));

// Upload handler
photoInput.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    const data = loadPhotos();
    if (!data[selectedDate]) data[selectedDate] = [];
    data[selectedDate].push({ src: ev.target.result, note: '', date: selectedDate });
    savePhotos(data);
    renderPhotos(selectedDate);
    updateCalendar();
    updateStreakBar();
  };
  reader.readAsDataURL(file);
});

// Calendar render
function updateCalendar() {
  const now = new Date();
  const month = now.toISOString().slice(0,7);
  const daysInMonth = new Date(now.getFullYear(), now.getMonth()+1, 0).getDate();
  const data = loadPhotos();

  calendarGrid.innerHTML = '';
  for (let d=1; d<=daysInMonth; d++) {
    const dateStr = `${month}-${String(d).padStart(2,'0')}`;
    const div = document.createElement('div');
    div.textContent = d;
    if (data[dateStr]?.length) div.classList.add('logged');
    if (dateStr===selectedDate) div.classList.add('active');
    div.onclick = () => {
      selectedDate = dateStr;
      updateCalendar();
      renderPhotos(dateStr);
    };
    calendarGrid.appendChild(div);
  }
  const total = Object.values(data).flat().length;
  document.getElementById('photoSummary').textContent = `${month} Gym Entries: ${total}`;
}

// Render grid
function renderPhotos(date) {
  const data = loadPhotos();
  const list = data[date] || [];
  photoFeed.innerHTML = '';
  if (list.length === 0) {
    photoFeed.innerHTML = `<p style="color:#777;text-align:center;">No photos for ${date}</p>`;
    return;
  }
  const grid = document.createElement('div');
  grid.className = 'photo-grid';
  list.forEach((p, idx) => {
    const card = document.createElement('div');
    card.className = 'photo-card';
    card.innerHTML = `<img src="${p.src}" data-idx="${idx}">`;
    grid.appendChild(card);
  });
  photoFeed.appendChild(grid);
}

// Modal logic
photoFeed.addEventListener('click', e => {
  if (e.target.tagName === 'IMG') {
    const idx = e.target.dataset.idx;
    const data = loadPhotos();
    const current = data[selectedDate][idx];
    modalImg.src = current.src;
    modalNote.value = current.note || '';
    modal.dataset.idx = idx;
    modal.classList.remove('hidden');
  }
});

modalNote.addEventListener('input', e => {
  const data = loadPhotos();
  const idx = modal.dataset.idx;
  if (data[selectedDate] && data[selectedDate][idx]) {
    data[selectedDate][idx].note = e.target.value;
    savePhotos(data);
  }
});

deletePhotoBtn.addEventListener('click', () => {
  const data = loadPhotos();
  const idx = modal.dataset.idx;
  data[selectedDate].splice(idx,1);
  savePhotos(data);
  modal.classList.add('hidden');
  renderPhotos(selectedDate);
  updateCalendar();
  updateStreakBar();
});

closeModalBtn.addEventListener('click', () => modal.classList.add('hidden'));

// Streak bar logic
function updateStreakBar() {
  const data = loadPhotos();
  const dates = Object.keys(data).sort();
  let streak=0,longest=0;
  for(let i=0;i<dates.length;i++){
    if(i>0){
      const diff=(new Date(dates[i])-new Date(dates[i-1]))/(1000*60*60*24);
      if(diff===1) streak++;
      else streak=1;
    } else streak=1;
    if(streak>longest) longest=streak;
  }
  document.getElementById('streakBar').innerHTML =
    `üî• Current Streak: ${streak} days | üèÖ Longest Streak: ${longest} days
     <div id="progressOuter"><div id="progressInner" style="width:${Math.min((streak/30)*100,100)}%"></div></div>`;
}

updateCalendar();
renderPhotos(selectedDate);
updateStreakBar();
</script>
<!-- ========================= END GYM / PHOTO TRACKER ========================= -->

<!-- Init -->
<script>
initDateGreeting();
renderWins();
</script>
</body>
</html>
